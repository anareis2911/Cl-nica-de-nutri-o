<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalhes do Paciente - Sistema Nutricionista</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/paciente-detalhes.css">
  <link href="https://fonts.googleapis.com/css2?family=Arsenal:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <img src="assets/images/logo.png" alt="Logo Clínica">
      </div>
      <nav>
        <ul>
            <li><a href="index.html" class="nav-link" data-page="home"><i class="fa-solid fa-house"></i></a></li>
          <li><a href="pacientes.html"><i class="fa-solid fa-user"></i></a></li>
          <li><a href="consultas.html"><i class="fa-solid fa-calendar"></i></a></li>
          <li><a href="planos.html"><i class="fa-solid fa-utensils"></i></a></li>
          <li><a href="relatorios.html"><i class="fa-solid fa-file-medical"></i></a></li>
        </ul>
      </nav>
    </aside>

    <!-- Conteúdo principal -->
    <main>
      <!-- Topo -->
      <header class="header">
        <div class="header-left">
          <h1>Detalhes do Paciente</h1>
          <nav class="breadcrumb">
            <a href="pacientes.html">Pacientes</a> > <span id="breadcrumb-nome">Detalhes</span>
          </nav>
        </div>
        <div class="header-right">
          <div class="user-info">
            <p>Bem-vindo(a), <strong>Ana Carolina Reis</strong></p>
            <div class="avatar">A</div>
          </div>
        </div>
      </header>

      <!-- Conteúdo da página de detalhes -->
      <section class="patient-details-content">
        <div class="patient-header">
          <div class="patient-avatar-large">
            <span id="avatar-inicial">?</span>
          </div>
          <div class="patient-header-info">
            <h2 id="patient-name">Carregando...</h2>
            <div class="patient-meta">
              <span id="patient-age"></span>
              <span id="patient-gender"></span>
              <span id="patient-id"></span>
            </div>
          </div>
          <div class="patient-actions">
            <button id="btn-edit" class="btn-edit-large">
              <i class="fas fa-edit"></i> Editar
            </button>
            <button id="btn-consulta" class="btn-primary-large" onclick="redirectToConsultas()">
              <i class="fas fa-calendar-plus"></i> Nova Consulta
            </button>
          </div>
        </div>

        <div class="patient-tabs">
          <button class="tab-button active" data-tab="info">Informações Pessoais</button>
          <button class="tab-button" data-tab="consultas">Histórico de Consultas</button>
          <button class="tab-button" data-tab="evolucao">Evolução</button>
        </div>

        <div class="tab-content">
          <!-- Aba de Informações Pessoais -->
          <div id="tab-info" class="tab-pane active">
            <div class="info-grid">
              <div class="info-card">
                <h3>Dados Pessoais</h3>
                <div class="info-item">
                  <label>Nome Completo:</label>
                  <span id="info-nome"></span>
                </div>
                <div class="info-item">
                  <label>Data de Nascimento:</label>
                  <span id="info-nascimento"></span>
                </div>
                <div class="info-item">
                  <label>Idade:</label>
                  <span id="info-idade"></span>
                </div>
                <div class="info-item">
                  <label>Sexo:</label>
                  <span id="info-sexo"></span>
                </div>
              </div>

              <div class="info-card">
                <h3>Contato</h3>
                <div class="info-item">
                  <label>Telefone:</label>
                  <span id="info-telefone"></span>
                </div>
                <div class="info-item">
                  <label>E-mail:</label>
                  <span id="info-email"></span>
                </div>
              </div>

              <div class="info-card">
                <h3>Informações Antropométricas</h3>
                <div class="info-item">
                  <label>Altura:</label>
                  <span id="info-altura"></span>
                </div>
                <div class="info-item">
                  <label>Peso:</label>
                  <span id="info-peso"></span>
                </div>
                <div class="info-item">
                  <label>IMC:</label>
                  <span id="info-imc"></span>
                </div>
                <div class="info-item">
                  <label>Classificação:</label>
                  <span id="info-classificacao"></span>
                </div>
              </div>

              <div class="info-card info-card-full">
                <h3>Observações</h3>
                <div class="info-item-full">
                  <span id="info-observacoes">Nenhuma observação registrada.</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba de Histórico de Consultas -->
          <div id="tab-consultas" class="tab-pane">
            <div class="consultas-header">
              <h3>Histórico de Consultas</h3>
              <button class="btn-small" onclick="redirectToConsultas()">
                <i class="fas fa-plus"></i> Nova Consulta
              </button>
            </div>
            
            <div class="consultas-list">
              <div class="consulta-item">
                <div class="consulta-data">12/03/2023</div>
                <div class="consulta-info">
                  <h4>Consulta de Acompanhamento</h4>
                  <p>Paciente relatou melhora na alimentação. Peso reduzido em 2kg desde a última consulta.</p>
                </div>
                <div class="consulta-actions">
                  <button class="btn-small"><i class="fas fa-eye"></i></button>
                  <button class="btn-small"><i class="fas fa-edit"></i></button>
                </div>
              </div>
              
              <div class="consulta-item">
                <div class="consulta-data">05/02/2023</div>
                <div class="consulta-info">
                  <h4>Primeira Consulta</h4>
                  <p>Avaliação inicial. Plano alimentar prescrito.</p>
                </div>
                <div class="consulta-actions">
                  <button class="btn-small"><i class="fas fa-eye"></i></button>
                  <button class="btn-small"><i class="fas fa-edit"></i></button>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba de Evolução -->
          <div id="tab-evolucao" class="tab-pane">
            <div class="evolucao-header">
              <h3>Evolução do Paciente</h3>
              <div class="evolucao-filters">
                <select>
                  <option>Últimos 3 meses</option>
                  <option>Últimos 6 meses</option>
                  <option>Último ano</option>
                  <option>Todo o histórico</option>
                </select>
              </div>
            </div>
            
            <div class="evolucao-grafico">
              <p class="placeholder-text">Gráfico de evolução de peso e IMC será exibido aqui.</p>
              <!-- Aqui iria um gráfico real com Chart.js ou similar -->
            </div>
            
            <div class="evolucao-dados">
              <div class="dado-item">
                <h4>Variação de Peso</h4>
                <span class="dado-valor positivo">-5 kg</span>
                <span class="dado-periodo">desde a primeira consulta</span>
              </div>
              
              <div class="dado-item">
                <h4>Variação de IMC</h4>
                <span class="dado-valor positivo">-2.1</span>
                <span class="dado-periodo">desde a primeira consulta</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal de edição de paciente (similar ao da página pacientes.html) -->
  <div id="patientModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="tituloModalPaciente">
    <div class="modal-content">
      <span class="close" aria-label="Fechar">&times;</span>
      <h2 id="tituloModalPaciente">Editar Paciente</h2>
      <form id="patientForm">
        <input type="hidden" id="pacienteId" name="pacienteId" value="">
        <div class="modal-grid">
          <div class="form-control">
            <label for="nome">Nome <span class="required">*</span></label>
            <input type="text" id="nome" name="nome" required>
            <span class="validation-message" id="nomeValidation"></span>
          </div>
          <div class="form-control">
            <label for="dataNascimento">Data de Nascimento <span class="required">*</span></label>
            <input type="date" id="dataNascimento" name="dataNascimento" required>
            <span class="validation-message" id="dataNascimentoValidation"></span>
          </div>
          <div class="form-control">
            <label for="idade">Idade</label>
            <input type="number" id="idade" name="idade" min="0" readonly>
          </div>
          <div class="form-control">
            <label for="sexo">Sexo <span class="required">*</span></label>
            <select id="sexo" name="sexo" required>
              <option value="">Selecione</option>
              <option value="Feminino">Feminino</option>
              <option value="Masculino">Masculino</option>
              <option value="Outro">Outro</option>
            </select>
            <span class="validation-message" id="sexoValidation"></span>
          </div>
          <div class="form-control">
            <label for="telefone">Telefone <span class="required">*</span></label>
            <input type="tel" id="telefone" name="telefone" placeholder="(11) 99999-9999" required>
            <span class="validation-message" id="telefoneValidation"></span>
          </div>
          <div class="form-control">
            <label for="email">E-mail</label>
            <input type="email" id="email" name="email">
            <span class="validation-message" id="emailValidation"></span>
          </div>
          <div class="form-control">
            <label for="altura">Altura (cm) <span class="required">*</span></label>
            <input type="number" id="altura" name="altura" step="0.01" min="0" required>
            <span class="validation-message" id="alturaValidation"></span>
          </div>
          <div class="form-control">
            <label for="peso">Peso (kg) <span class="required">*</span></label>
            <input type="number" id="peso" name="peso" step="0.01" min="0" required>
            <span class="validation-message" id="pesoValidation"></span>
          </div>
          <div class="form-control">
            <label for="imc">IMC</label>
            <input type="text" id="imc" name="imc" readonly>
          </div>
          <div class="form-control">
            <label for="classificacao">Classificação</label>
            <input type="text" id="classificacao" name="classificacao" readonly>
          </div>
          <div class="form-control form-control--full">
            <label for="observacoes">Observações</label>
            <textarea id="observacoes" name="observacoes" rows="3"></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" id="cancelButton" class="btn-secondary">Cancelar</button>
          <button type="submit" class="btn-primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>
  <!-- /Modal de edição -->

  <script src="js/paciente-detalhes.js"></script>
  <script>
    // Função para redirecionar para a página de consultas
    function redirectToConsultas() {
      window.location.href = 'consultas.html';
    }
  </script>
</body>
</html>